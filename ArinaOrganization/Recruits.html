<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0S3J891FKK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-0S3J891FKK');
    </script>
    <meta charset="utf-8" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="viewport" content="width=device-width">
    <title>徵人啟事(Recruit)</title>
    <link rel="stylesheet" href="ArinaPage.css">
</head>
<body>
    <script src="Arina.js"></script>
    <h3 style="text-align:center">徵人啟事(Recruits)</h3>
    <div style="margin:auto; width:1000px" id="divMain">
        <article style="margin: 50px;" id="main">
        </article>
    </div>
    <div style="text-align:center; margin:10px">
        聯絡我們(Contact us): <a href="mailto:KentoHize@gmail.com">KentoHize@gmail.com</a><br />
        Twitter: <a href="https://twitter.com/KentoHize">https://twitter.com/KentoHize</a>
    </div>
    <script>
        function draw_table() {
            var data;
            var divMain = document.getElementById("main");
            var xhttp = new XMLHttpRequest();
            document.getElementById("main").innerText = "";
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = this.response;
                    var table = document.createElement("table");
                    var tr, td, text;                  

                    for (var i = 0; i < data.length; i++) {
                        if (!data[i].Publish)
                            continue;

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("職務名稱(Title)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Name}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                         tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("薪資(Salary)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Salary}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("類型(Type)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Type}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("地點(Location)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Location}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("工作時間(Working Time)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].WorkTime}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("工作可開始(Start At)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].StartAt}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("工作需求(Requirement)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        td.innerHTML = `${ChangeLFtoBRLabel(data[i].Requirement)}`;
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("詳細說明(Description)");
                        td.width = "300px";
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        td.innerHTML = `${ChangeLFtoBRLabel(data[i].Description)}`;
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        td.height = "30px";
                        tr.appendChild(td);
                        table.appendChild(tr);
                    }

                    table.removeChild(table.lastChild);
                    divMain.appendChild(table);
                }
            };
            xhttp.responseType = 'json';
            xhttp.open("GET", "Jobs.json?v=" + Math.random(), true);
            xhttp.send();

            
            //xhttp = new XMLHttpRequest();
            //xhttp.responseType = 'json';
            //xhttp.onreadystatechange = function () {
            //    if (this.readyState == 4 && this.status == 200) {
            //        data = this.response;
            //        /*document.getElementById("iLastUpdate").innerText = `Last Update: ${data[0].LastUpdate}`;*/
            //    }
            //}
            //xhttp.open("GET", "LastUpdate.json?v=" + Math.random(), true);
            //xhttp.send();
        }

        function redraw(display_all = false) {
            //divMain.width = window.innerWidth;
            draw_table();
        }

        redraw();
    </script>    
</body>
</html>