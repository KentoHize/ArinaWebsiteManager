<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0S3J891FKK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-0S3J891FKK');
    </script>
    <meta charset="utf-8" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="viewport" content="width=device-width">
    <title>徵人啟事(Recruits)</title>
    <link rel="stylesheet" href="ArinaPage.css">
</head>
<body>
    <script src="Arina.js?r=1"></script>
    <h3 style="text-align:center">徵人啟事(Recruits)</h3>    
    <div style="margin:auto" id="divMain">
        <div id="main">
        </div>
    </div>
    <div style="text-align:center; margin:10px">
        聯絡我們(Contact us): <a href="mailto:KentoHize@gmail.com">KentoHize@gmail.com</a><br />
        Twitter: <a href="https://twitter.com/KentoHize">https://twitter.com/KentoHize</a>
    </div>
    <script>
        var window_size;

        function draw_table() {
            var data;
            var divMain = document.getElementById("main");
            var xhttp = new XMLHttpRequest();
            divMain.innerText = "";
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    
                    data = this.response;
                    var table = document.createElement("table");
                    var tr, td, text;
                    var lw;
                    if (window_size == "m" || window_size == "l")
                        lw = "200px";
                    else
                        lw = "130px";
                    for (var i = 0; i < data.length; i++) {                        
                        if (!data[i].Publish)
                            continue;
                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("職務名稱(Title)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Name}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);
                        
                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("薪資(Salary)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Salary}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("類型(Type)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Type}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("地點(Location)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].Location}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("工作時間(Working Time)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].WorkTime}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("工作可開始(Start At)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        text = document.createTextNode(`${data[i].StartAt}`);                        
                        td.appendChild(text);
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("工作需求(Requirement)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        td.innerHTML = `${ChangeLFtoBRLabel(data[i].Requirement)}`;
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        text = document.createTextNode("詳細說明(Description)");
                        td.width = lw;
                        td.appendChild(text);
                        tr.appendChild(td);
                        td = document.createElement("td");
                        td.innerHTML = `${ChangeLFtoBRLabel(data[i].Description)}`;
                        tr.appendChild(td);
                        table.appendChild(tr);

                        tr = document.createElement("tr");
                        td = document.createElement("td");
                        td.height = "30px";
                        tr.appendChild(td);
                        table.appendChild(tr);                        
                    }
                    
                    table.removeChild(table.lastChild);
                    divMain.appendChild(table);
                    
                }
            };
            xhttp.responseType = 'json';
            xhttp.open("GET", "Jobs.json?v=" + Math.random(), true);
            xhttp.send();

            
            //xhttp = new XMLHttpRequest();
            //xhttp.responseType = 'json';
            //xhttp.onreadystatechange = function () {
            //    if (this.readyState == 4 && this.status == 200) {
            //        data = this.response;
            //        /*document.getElementById("iLastUpdate").innerText = `Last Update: ${data[0].LastUpdate}`;*/
            //    }
            //}
            //xhttp.open("GET", "LastUpdate.json?v=" + Math.random(), true);
            //xhttp.send();
        }

        function redraw(display_all = false) {

            if (window.innerWidth < 800)
                window_size = "s";
            else if (window.innerWidth < 1300)
                window_size = "m";
            else
                window_size = "l";

            if (display_all) {
                window_size = "l";
                document.getElementById("main").style = `margin:auto; width:${window.innerWidth > 1100 ? window.innerWidth : 1100}px`;
                document.getElementsByTagName('meta')['viewport'].content = "";
            }

            if (window_size == "s")
                document.getElementById("main").style = `margin:auto; width:360px`;
            else if (window_size == "m" || window_size == "l")
                document.getElementById("main").style = `margin:auto; width:800px`; 
            
            draw_table();
        }

        redraw();
    </script>    
</body>
</html>